rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {

    // audio files (TTS generated, session recordings)
    match /audio/{allPaths=**} {
      // allow public read for playback
      allow read: if true;

      // allow server-side write (from API routes)
      allow write: if true;

      // TODO: once auth is implemented, restrict writes to:
      // allow write: if request.auth != null;
    }

    // deny all other paths by default
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}
